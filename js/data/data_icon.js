// js/data/data_icon.js
console.log("åŠ è½½ å›¾æ ‡é…ç½®");

const ITEM_ICONS = {
    // é»˜è®¤ç±»å‹å›¾æ ‡ (å…œåº•ç”¨)
    default: "ğŸ“¦",

    // åŸºç¡€ç±»å‹æ˜ å°„
    material: "ğŸ“¦",      // ææ–™
    foodMaterial: "ğŸ¥¬",  // é£Ÿæ
    food: "ğŸ±",          // æ–™ç†
    weapon: "âš”ï¸",         // å…µå™¨
    head: "ğŸ§¢",          // å¤´ç›”
    body: "ğŸ¥‹",          // è¡£æœ
    feet: "ğŸ‘¢",          // é‹å­
    book: "ğŸ“˜",          // ä¹¦ç±
    pill: "ğŸ’Š",          // ä¸¹è¯
    herb: "ğŸŒ¿",          // è‰è¯
    tool: "ğŸª“",          // å·¥å…·
    mount: "ğŸ",         // åéª‘
    fishing_rod: "ğŸ£",   // é’“å…·

    // å±æ€§å›¾æ ‡ (ä¾› UI ä½¿ç”¨)
    money: "ğŸ’°",
    attack: "âš”ï¸",
    defense: "ğŸ›¡ï¸",
    speed: "ğŸ¦¶",
    hp: "â¤ï¸",
    mp: "ğŸ’§"
};

/**
 * åå­—å…³é”®è¯æ˜ å°„è¡¨
 * ç³»ç»Ÿä¼šéå†è¿™ä¸ªåˆ—è¡¨ï¼Œå¦‚æœç‰©å“åå­—åŒ…å« keyï¼Œå°±ä½¿ç”¨å¯¹åº”çš„ iconã€‚
 * æ³¨æ„ï¼šè¶Šå…·ä½“çš„è¯åº”è¯¥æ”¾åœ¨è¶Šå‰é¢ï¼Œè¶Šé€šç”¨çš„æ”¾åé¢ã€‚
 */
const NAME_KEYWORD_MAP = [
    // --- å…µå™¨ç±» ---
    { key: "å‰‘", icon: "ğŸ—¡ï¸" },
    { key: "åˆ€", icon: "ğŸ”ª" },
    { key: "åˆƒ", icon: "ğŸ—¡ï¸" },
    { key: "æª", icon: "ğŸ”±" }, // é•¿æª
    { key: "çŸ›", icon: "ğŸ”±" },
    { key: "å¼“", icon: "ğŸ¹" },
    { key: "å¼©", icon: "ğŸ¹" },
    { key: "ç®­", icon: "ğŸ¹" },
    { key: "æ–§", icon: "ğŸª“" },
    { key: "é”¤", icon: "ğŸ”¨" },
    { key: "æ£", icon: "ğŸ¥¢" },
    { key: "æ–", icon: "ğŸ¥–" },
    { key: "é­", icon: "ğŸ§¶" },
    { key: "é•–", icon: "âœ´ï¸" },

    // --- è£…å¤‡ç±» ---
    { key: "ç›”", icon: "â›‘ï¸" },
    { key: "å¸½", icon: "ğŸ§¢" },
    { key: "å† ", icon: "ğŸ‘‘" },
    { key: "å·¾", icon: "ğŸ§£" },
    { key: "ç”²", icon: "ğŸ›¡ï¸" }, // é“ ç”²
    { key: "è¢", icon: "ğŸ‘˜" },
    { key: "è¡£", icon: "ğŸ‘•" },
    { key: "è¡«", icon: "ğŸ‘•" },
    { key: "é‹", icon: "ğŸ‘" },
    { key: "é´", icon: "ğŸ‘¢" },
    { key: "å±¥", icon: "ğŸ¥¿" },
    { key: "æˆ’", icon: "ğŸ’" },
    { key: "é•¯", icon: "â­•" },
    { key: "ç‰ä½©", icon: "ğŸ“¿" },
    { key: "æŠ¤ç¬¦", icon: "ğŸ§¿" },

    // --- ä¸¹è¯/è‰è¯ç±» ---
    { key: "ä¸¹", icon: "ğŸ’Š" },
    { key: "ä¸¸", icon: "ğŸ’Š" },
    { key: "æ•£", icon: "ğŸ§‚" }, // ç²‰æœ«çŠ¶
    { key: "è†", icon: "ğŸ§´" },
    { key: "æ¶²", icon: "ğŸ§ª" },
    { key: "éœ²", icon: "ğŸ’§" },
    { key: "æ°´", icon: "ğŸ’§" },
    { key: "è‰", icon: "ğŸŒ¿" },
    { key: "èŠ±", icon: "ğŸŒ¸" },
    { key: "å¶", icon: "ğŸƒ" },
    { key: "æ ¹", icon: "ğŸ¥•" },
    { key: "æœ", icon: "ğŸ" },
    { key: "è²", icon: "ğŸµï¸" },
    { key: "å‚", icon: "ğŸ¥•" }, // äººå‚
    { key: "èŠ", icon: "ğŸ„" }, // çµèŠ
    { key: "è‡", icon: "ğŸ„" },

    // --- ä¹¦ç±/åŠŸæ³•ç±» ---
    { key: "ç»", icon: "ğŸ“œ" },
    { key: "ä¹¦", icon: "ğŸ“–" },
    { key: "ç±", icon: "ğŸ“˜" },
    { key: "è°±", icon: "ğŸ¼" },
    { key: "å·", icon: "ğŸ“œ" },
    { key: "å›¾", icon: "ğŸ—ºï¸" },
    { key: "è¯€", icon: "ğŸ“‘" },
    { key: "æ³•", icon: "ğŸ“š" },
    { key: "åŠŸ", icon: "ğŸ§˜" },

    // --- é£Ÿæ/æ–™ç†ç±» ---
    { key: "è‚‰", icon: "ğŸ–" },
    { key: "é±¼", icon: "ğŸŸ" },
    { key: "è™¾", icon: "ğŸ¦" },
    { key: "èŸ¹", icon: "ğŸ¦€" },
    { key: "é¸¡", icon: "ğŸ“" },
    { key: "é¸­", icon: "ğŸ¦†" },
    { key: "ç‰›", icon: "ğŸ‚" },
    { key: "ç¾Š", icon: "ğŸ" },
    { key: "çŒª", icon: "ğŸ–" },
    { key: "è›‹", icon: "ğŸ¥š" },
    { key: "ç±³", icon: "ğŸš" },
    { key: "é¥­", icon: "ğŸš" },
    { key: "é¢", icon: "ğŸœ" },
    { key: "ç²‰", icon: "ğŸœ" },
    { key: "æ±¤", icon: "ğŸ²" },
    { key: "é…’", icon: "ğŸ¶" },
    { key: "é…¿", icon: "ğŸ¶" },
    { key: "èŒ¶", icon: "ğŸµ" },
    { key: "é¥¼", icon: "ğŸ¥®" },
    { key: "èœ", icon: "ğŸ¥¬" },
    { key: "ç“œ", icon: "ğŸˆ" },

    // --- ææ–™/çŸ¿ç‰©ç±» ---
    { key: "çŸ¿", icon: "â›ï¸" },
    // { key: "çŸ³", icon: "ğŸª¨" },
    { key: "é“", icon: "ğŸ”©" },
    { key: "é“œ", icon: "ğŸ¥‰" },
    { key: "é“¶", icon: "ğŸ¥ˆ" },
    { key: "é‡‘", icon: "ğŸ¥‡" },
    { key: "ç‰", icon: "ğŸ’" },
    { key: "æ™¶", icon: "ğŸ’" },
    // { key: "æœ¨", icon: "ğŸªµ" },
    { key: "æ ‘", icon: "ğŸŒ²" },
    { key: "çš®", icon: "ğŸ“œ" }, // å…½çš®
    { key: "æ¯›", icon: "ğŸ§¶" },
    { key: "éª¨", icon: "ğŸ¦´" },
    { key: "é³", icon: "ğŸ§¬" },
    { key: "ç¬¦", icon: "ğŸŸ¨" },

    // --- åéª‘/åŠ¨ç‰© ---
    { key: "é©¬", icon: "ğŸ" },
    // { key: "é©´", icon: "ğŸ«" },
    { key: "é¹¿", icon: "ğŸ¦Œ" },
    { key: "é¹¤", icon: "ğŸ¦¢" },
    { key: "è™", icon: "ğŸ…" },
    { key: "ç‹®", icon: "ğŸ¦" },
    { key: "é¾™", icon: "ğŸ‰" },
    { key: "å‰‘", icon: "ğŸ—¡ï¸" }, // é£å‰‘

    // --- å·¥å…· ---
    { key: "é•", icon: "â›ï¸" },
    { key: "é”„", icon: "âš’ï¸" },
    { key: "é•°", icon: "ğŸŒ¾" },
    { key: "ç«¿", icon: "ğŸ£" }
];

/**
 * è·å–ç‰©å“å›¾æ ‡
 * ä¼˜å…ˆçº§:
 * 1. ç‰©å“æ•°æ®è‡ªå¸¦ icon
 * 2. ç‰©å“åå­—åŒ¹é…å…³é”®å­—
 * 3. ç‰©å“ç±»å‹é»˜è®¤å›¾æ ‡
 * 4. é€šç”¨é»˜è®¤å›¾æ ‡
 */
function getItemIcon(item) {
    if (!item) return ITEM_ICONS.default;

    // 1. å¦‚æœç‰©å“æ•°æ®é‡Œå•ç‹¬é…äº† icon å­—æ®µï¼Œä¸”ä¸ä¸ºç©ºï¼Œä¼˜å…ˆç”¨é‚£ä¸ª
    if (item.icon && item.icon.trim() !== "") {
        return item.icon;
    }

    // 2. æ ¹æ®ä¸­æ–‡åå­—åŒ¹é… (éå†æ˜ å°„è¡¨)
    if (item.name) {
        for (let i = 0; i < NAME_KEYWORD_MAP.length; i++) {
            const entry = NAME_KEYWORD_MAP[i];
            // åªè¦åå­—é‡ŒåŒ…å«è¿™ä¸ªå­—ï¼Œå°±è¿”å›å¯¹åº”å›¾æ ‡
            if (item.name.includes(entry.key)) {
                return entry.icon;
            }
        }
    }

    // 3. æ ¹æ®ç±»å‹è¿”å› (ç±»å‹æ˜ å°„è¡¨)
    if (item.type && ITEM_ICONS[item.type]) {
        return ITEM_ICONS[item.type];
    }

    // 4. ç»å¯¹ä¿åº•
    return ITEM_ICONS.default;
}

// å¯¼å‡ºåˆ°å…¨å±€
window.ITEM_ICONS = ITEM_ICONS;
window.getItemIcon = getItemIcon;